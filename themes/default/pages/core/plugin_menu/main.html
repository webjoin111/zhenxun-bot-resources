{% extends 'partials/_base.html' %}

{% block title %}
    真寻BOT帮助页面
{% endblock %}

{% block page_styles %}
    <style>
        {% include './style.css' %}
    </style>
{% endblock %}

{% block body_content %}
    <div class="wrapper">
        <div class="main">
            <div class="header">
                <div class="header-top">
                    {% include 'pages/core/plugin_menu/_header_decorations.html' ignore missing %}
                    <div class="divider"></div>
                    <div class="top-info">
                        <div class="avatar"><img class="avatar-img" src="{{data.bot_avatar_url}}" alt="{{data.bot_name}}"></div>
                        <div class="stats">
                            <div class="stat-item"><div class="stat-number">{{data.plugin_count}}</div><div>功能</div></div>
                            <div class="stat-item"><div class="stat-number">{{data.active_count}}</div><div>可用</div></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tips-section">
                <div class="tips-grid">
                    <div class="tip-item"><div class="tip-icon">?</div><span>AT我 发送 "帮助 功能名/ID" 查看功能详情</span></div>
                    <div class="tip-item"><div class="tip-icon">📋</div><span>发送 "详细帮助" 查看所有指令详情</span></div>
                    <div class="tip-item"><div class="tip-icon">👑</div><span>群主/群管使用 "管理员帮助" 指令查看管理指令</span></div>
                </div>
            </div>
            <div class="masonry-container">
                {% for category in data.categories %}
                {% set item_count = category['items']|length if category['items'] else 0 %}
                <div class="category-card {% if item_count < 10 %}small-items{% else %}many-items{% endif %}">
                    <div class="category-title">{{category.name}}<span class="category-count">{{item_count}}</span></div>
                    {% if item_count == 0 %}
                    <div class="empty-category">暂无功能</div>
                    {% else %}
                    <div class="plugin-list{% if item_count >= 10 %} two-columns{% endif %}">
                        {% for item in category['items'] %}
                        <div class="plugin-item {% if not item.status %}disabled{% endif %}">
                            <div class="plugin-header">
                                <span class="plugin-id">{{item.id}}</span>
                                <span class="plugin-name">{{item.name}}</span>
                                <div class="plugin-badges">
                                    {% if item.has_superuser_help %}<span class="badge super_help">S</span>{% endif %}
                                </div>
                            </div>
                            {% if item.commands %}
                            <div class="plugin-commands">
                                {% for command in item.commands %}<span class="command">{{command}}</span>{% endfor %}
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            {% include './_footer_decorations.html' ignore missing %}
        </div>
    </div>
{% endblock %}

{% block footer %}{% include 'partials/_footer.html' %}{% endblock %}