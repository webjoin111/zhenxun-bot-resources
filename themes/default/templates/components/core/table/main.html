{% extends 'partials/_base.html' %}

{% block title %}{{ data.title }}{% endblock %}

{% block head_extra %}
    <style>
        {{ theme_css | safe }}
        {# [修改] 修正CSS文件的 include 路径 #}
        {% include 'components/core/table/main.css' %}
    </style>
{% endblock %}

{% block body_content %}
    <div class="container">
        <div class="header">
            <h1>{{ data.title }}</h1>
            {% if data.tip %}
            <p>{{ data.tip | replace("`", "<code>") | replace("`", "</code>") | safe }}</p>
            {% endif %}
        </div>
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        {% for header in data.headers %}
                        <th>{{ header }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for row in data.rows %}
                    <tr>
                        {% for cell in row %}
                        <td>
                            {% if cell and cell.type == 'image' %}
                                <img class="cell-image {{ 'circular' if cell.shape == 'circle' }}"
                                     src="{{ cell.src }}"
                                     alt="{{ cell.alt }}"
                                     width="{{ cell.width }}"
                                     height="{{ cell.height }}">
                            {% elif cell and cell.type == 'text' %}
                                <span class="cell-text"
                                      style="font-weight: {{ 'bold' if cell.bold else 'normal' }}; color: {{ cell.color if cell.color else 'inherit' }};">
                                    {{ cell.content }}
                                </span>
                            {% elif cell and cell.type == 'badge' %}
                                <span class="status-badge {{ cell.status_type }}">
                                    {{ cell.text }}
                                </span>
                            {% elif cell is mapping and 'available' in cell %}
                                <span class="status-badge {{ 'ok' if cell.available else 'error' }}">
                                    <span>{{ cell.text }}</span>
                                </span>
                            {% else %}
                                {{ cell }}
                            {% endif %}
                        </td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}

{% block footer %}{% endblock %}
